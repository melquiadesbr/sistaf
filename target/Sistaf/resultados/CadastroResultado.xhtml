<ui:composition template="/WEB-INF/template/LayoutPadrao.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:o="http://omnifaces.org/ui">
	
    <ui:define name="titulo">Incluir Militar em TAF</ui:define>
    
    <ui:define name="corpo">
    
    
    	<f:metadata>
    		<f:event listener="#{cadastroResultadoBean.inicializar}" type="preRenderView" />
    		<f:event listener="#{pesquisaTafsBean.pesquisar}" type="preRenderView" />
    	</f:metadata>
    
    	
		<h:form id="frmCadastroTaf">
			
	    	<h1>Incluir Militar em TAF</h1>
	    	
	    	<p:messages autoUpdate="true" closable="true" />
	    
	    	<p:toolbar style="margin-top: 20px">
	    		
	    		<p:toolbarGroup>
		    		<p:selectOneMenu id="militar" value="#{cadastroResultadoBean.resultado.militar}">
		    			<f:selectItems value="#{cadastroResultadoBean.militaresLista}" var="militar" 
		    				itemValue="#{militar}" itemLabel="#{militar.nomeGuerra} - #{militar.patenteAbr}" />
		    		</p:selectOneMenu>
		    		
		    		<p:selectOneMenu id="taf" value="#cadastroResultadoBean.resultado.taf">
		    			<f:selectItems value="#{cadastroResultadoBean.tafsLista}" var="taf" 
		    				itemValue="#{taf}" itemLabel="#{taf.numero}º Taf de #{taf.anoTaf} / #{taf.chamada}ª Ch. / Dia #{taf.dia}" />
		    		</p:selectOneMenu>
		    	</p:toolbarGroup>
		    	<p:toolbarGroup>
		    		<p:inputText id="codigo" size="20" onchange="javascript:document.getElementById('botaoSalvar').click()" maxlength="20" value="#{cadastroResultadoBean.resultado.codBarra}" />
		    		<p:commandButton value="Registrar Número"  id="botaoSalvar" action="#{cadastroResultadoBean.salvar}" 
	    				update="@form, frmCadastroResultado:resultadosTable" 
	    			/>
		    	</p:toolbarGroup>
	    		
	    	</p:toolbar>
	    	
	    </h:form>
	    
	    <h:form id="frmCadastroResultado">
	    	
	    	<br />
	    	<br />
	    	<h1>Lançar Resultado de TAF</h1>
	    	
	    	<p:toolbar style="margin-top: 20px">
	        	<p:toolbarGroup>
	        		<p:commandButton value="Salvar Todos"  id="botaoSalvarTodos" action="#{cadastroResultadoBean.salvarLista}" 
	    				update="@form"
	    			/>
	        	</p:toolbarGroup>
	        </p:toolbar>
		        
	    	<p:dataTable id="resultadosTable" value="#{cadastroResultadoBean.resultadoLista}" var="resultado"
	    		style="margin-top: 20px" emptyMessage="Nenhum resultado encontrado." rows="20"
	    		paginator="true" paginatorAlwaysVisible="false" paginatorPosition="bottom" 
	    		editable="true" editMode="cell">
	    		<f:facet name="header">
		            <b>Militares que realizaram o TAF </b>
		            
		        </f:facet>
		        
		     
		        
	    		<p:column headerText="Código" style="text-align: center; width:100px;" sortBy="#{resultado.codBarra}">
	    			<h:outputText value="#{resultado.codBarra}" />
	    		</p:column>
	    		<p:column headerText="Patante" style="width:80px" sortBy="#{resultado.militar.patente}">
	    			<h:outputText value="#{resultado.militar.patenteAbr}"/>
	    		</p:column>
	    		<p:column headerText="Militar" sortBy="#{resultado.militar.nomeGuerra}">
	    			<h:outputText value="#{resultado.militar.nomeGuerra}"/>
	    		</p:column>
	    		<p:column headerText="Idade" style="width:50px; text-align: center;">
	    			<h:outputText value="#{resultado.militar.idade}"/>
	    		</p:column>
	    	
	    		<p:column headerText="Corrida" style="width:100px; text-align: center;">
	              <p:inputText id="codigo" size="20"  maxlength="20" value="#{resultado.corrida}"  style="width:90%"/>
	            </p:column>
	            
	            <p:column headerText="Barra" style="width:100px; text-align: center;">
	              <p:inputText id="barra" size="20"  maxlength="20" value="#{resultado.barra}" style="width:90%" />
	            </p:column>
	            
	            <p:column headerText="Flexao" style="width:100px; text-align: center;">
	              <p:inputText id="flexao" size="20"  maxlength="20" value="#{resultado.flexao}" style="width:90%" />
	            </p:column>
	            
	            <p:column headerText="Abdominal" style="width:100px; text-align: center;">
	              <p:inputText id="abdominal" size="20"  maxlength="20" value="#{resultado.abdominal}" style="width:90%"/>
	            </p:column>
	    		
	    		<p:column headerText="Mencao" sortBy="#{resultado.mencao}" style="text-align: center; width: 100px">
	    			<h:outputText value="#{resultado.mencaoAbr}" />
	    		</p:column>
	    		
	    		<p:column headerText="Mencao (2018)" sortBy="#{resultado.novaMencao}" style="text-align: center; width: 120px">
	    			<h:outputText value="#{resultado.novaMencaoAbr}" />
	    		</p:column>
	    		
	    		<p:column headerText="Alternativo" sortBy="#{resultado.tafAlternativo}" style="text-align: center; width: 120px">
	    			<h:outputText value="#{resultado.tafAlternativo}" />
	    		</p:column>
	    		
	    		<p:column headerText="Ações" style="width: 40px; text-align: center">
	    			<p:commandButton icon="ui-icon-trash" title="Excluir" oncomplete="PF('confirmacaoExclusao').show()"
	    					process="@this" update=":frmCadastroResultado:confirmacaoExclusaoDialog">
	    				<f:setPropertyActionListener target="#{cadastroResultadoBean.resultadoSelecionado}" 
	    					value="#{resultado}" />
	    			</p:commandButton>
	    		</p:column>
	    	
	    	</p:dataTable>
	    	
	    	<p:confirmDialog header="Exclusão de Resultado" 
	    		message="Tem certeza que deseja excluir resultado do #{cadastroResultadoBean.resultadoSelecionado.militar.patenteAbr} #{cadastroResultadoBean.resultadoSelecionado.militar.nomeGuerra}?"
	    		widgetVar="confirmacaoExclusao"	id="confirmacaoExclusaoDialog">
	    		<p:button value="Não" onclick="PF('confirmacaoExclusao').hide(); return false;" />
	    		<p:commandButton value="Sim" oncomplete="PF('confirmacaoExclusao').hide();" 
	    			action="#{cadastroResultadoBean.excluir}" process="@this" 
	    			update=":frmCadastroResultado:resultadosTable" id="yesButton" />
	    		</p:confirmDialog>
	    
	    </h:form>
	    	
    </ui:define>
</ui:composition>